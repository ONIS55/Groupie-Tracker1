ğŸ—ï¸ Architecture du projet

Structure des dossiers :
/home/onis/Ynov/Groupi-Tracker/
â”œâ”€â”€ server.go                    â† Serveur backend Go (racine du projet)
â”œâ”€â”€ README.md                     â† Documentation complÃ¨te
â”œâ”€â”€ scripts/                      â† Scripts de test
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ mai.go
â”‚   â”œâ”€â”€ Artists.go
â”‚   â”œâ”€â”€ Dates.go
â”‚   â””â”€â”€ Location.go
â””â”€â”€ static/                       â† Fichiers frontend
    â”œâ”€â”€ index.html               â† Page d'accueil
    â”œâ”€â”€ artists.html             â† Liste des artistes
    â”œâ”€â”€ artist-detail.html       â† DÃ©tail d'un artiste
    â”œâ”€â”€ locations.html           â† Lieux de concert
    â”œâ”€â”€ dates.html               â† Dates de concert
    â”œâ”€â”€ css/
    â”‚   â””â”€â”€ style.css            â† 630 lignes de styles
    â””â”€â”€ js/
        â”œâ”€â”€ utils.js             â† Fonctions partagÃ©es (NOUVEAU)
        â”œâ”€â”€ city-images.js       â† Gestion images Pexels (NOUVEAU)
        â”œâ”€â”€ artists.js           â† Logique page artistes
        â”œâ”€â”€ artist-detail.js     â† Logique dÃ©tail artiste
        â”œâ”€â”€ locations.js         â† Logique page lieux
        â””â”€â”€ dates.js             â† Logique page dates

================================================================================

Backend (Go)

1. server.go (racine du projet) - Serveur principal
   Ligne 12 : ClÃ© API Pexels stockÃ©e cÃ´tÃ© serveur (sÃ©curitÃ©)
   Ligne 16 : Sert les fichiers statiques depuis ./static
   Lignes 19-22 : DÃ©finit 4 routes API :
      /api/artists â†’ rÃ©cupÃ¨re la liste des artistes
      /api/locations â†’ rÃ©cupÃ¨re les lieux de concert
      /api/dates â†’ rÃ©cupÃ¨re les dates de concert
      /api/city-image â†’ rÃ©cupÃ¨re images Pexels (NOUVEAU)
   Ligne 36 : Lance le serveur sur le port 8080

   Lignes 40-53 : proxyAPI(endpoint) - Fonction proxy UNIFIÃ‰E
      AMÃ‰LIORATION : Une seule fonction pour 3 endpoints (au lieu de 3 fonctions identiques)
      Ligne 42 : Fait requÃªte GET vers API externe
      Ligne 47 : defer resp.Body.Close() ferme connexion automatiquement
      Ligne 49 : Lit tout le contenu de la rÃ©ponse
      Lignes 50-51 : Renvoie le JSON directement au client

   Lignes 56-118 : handleCityImage() - RÃ©cupÃ¨re images de villes via Pexels
      Ligne 58 : RÃ©cupÃ¨re le paramÃ¨tre ?city=... de l'URL
      Lignes 65-66 : Construit URL Pexels avec nom ville + " city"
      Ligne 76 : Ajoute clÃ© API dans header Authorization
      Lignes 95-101 : Structure anonyme pour parser JSON Pexels
      Ligne 103 : json.Unmarshal() convertit JSON en structure Go
      Lignes 110-114 : Retourne URL image ou chaÃ®ne vide si aucune
      Ligne 117 : Encode et envoie rÃ©ponse JSON au client

================================================================================

Frontend - Fichiers Utilitaires (NOUVEAU)

1. utils.js - Fonctions partagÃ©es (51 lignes)
   AMÃ‰LIORATION : Ã‰vite duplication de code dans 3 fichiers diffÃ©rents

   Lignes 8-16 : hashToHue(value)
      GÃ©nÃ¨re une couleur unique (teinte HSL 0-360) basÃ©e sur hash d'un texte
      Ligne 12 : (hash << 5) - hash = algorithme de hash
      Ligne 15 : Math.abs(hash) % 360 limite entre 0-359
      Utilisation : MÃªme nom = toujours mÃªme couleur

   Lignes 23-28 : normalize(value)
      Normalise texte pour recherche (minuscules, trim, remplace _)
      "Paris" â†’ "paris" | "new_york" â†’ "new york"

   Lignes 35-41 : parseId(id)
      Valide qu'un ID est un nombre positif
      Ligne 36 : parseInt(id, 10) convertit en nombre base 10
      Ligne 37 : Retourne null si NaN ou < 1
      SÃ‰CURITÃ‰ : EmpÃªche IDs invalides

   Lignes 48-50 : formatDateLabel(value)
      Supprime astÃ©risque devant dates
      "*2015-06-20" â†’ "2015-06-20"

2. city-images.js - Gestion images Pexels (43 lignes)
   AMÃ‰LIORATION : Cache Map + Images rÃ©elles via Pexels API

   Ligne 2 : imageCache = new Map()
      Cache URLs images pour Ã©viter requÃªtes rÃ©pÃ©tÃ©es
      Structure : "paris-france" â†’ "https://images.pexels.com/..."

   Lignes 5-36 : getCityImageUrl(location)
      Ligne 7-9 : VÃ©rifie cache, retourne immÃ©diatement si trouvÃ©
      Lignes 13-16 : Extrait nom ville : "paris-france" â†’ "paris"
      Ligne 20 : RequÃªte vers /api/city-image?city=...
      Ligne 25 : Sauvegarde dans cache
      Lignes 33-35 : Fallback vers Lorem Picsum si Pexels Ã©choue

   Lignes 39-42 : getFallbackImageUrl(location)
      Ligne 40 : Calcule ID unique entre 0-999
      Ligne 41 : Retourne URL Lorem Picsum (400Ã—300px)

================================================================================

Frontend - Pages Principales

1. index.html - Page d'accueil
   Navigation avec 4 liens (Accueil, Artistes, Lieux, Dates)
   Section hero avec bouton "Voir les Artistes"
   3 cartes cliquables menant vers chaque section
   Aucun JavaScript (page statique)

2. artists.html - Page principale des artistes
   Structure :
      Barre latÃ©rale (sidebar) avec "bulles" cliquables par artiste
      Zone de recherche + bouton recherche avancÃ©e (ğŸ”)
      Panneau filtres avancÃ©s pour filtrer par :
         Lieux (ex: "paris")
         Dates (ex: "2015-06-20")
         Plage d'annÃ©es (De/Ã€)
   Scripts chargÃ©s : utils.js PUIS artists.js (ordre important!)

3. artists.js - Logique page artistes (201 lignes)
   Variables globales (lignes 1-3) :
      allArtists = [] : Tableau de tous les artistes
      artistLocationsById = new Map() : Map ID â†’ lieux
      artistDatesById = new Map() : Map ID â†’ dates

   Lignes 5-8 : Initialisation
      Ligne 6 : Promise.all() charge 3 APIs EN PARALLÃˆLE (plus rapide)
      Ligne 7 : Configure Ã©vÃ©nements de recherche

   Lignes 10-33 : loadArtists()
      RÃ©cupÃ¨re artistes depuis /api/artists
      Ligne 20 : fetch('/api/artists')
      Ligne 24 : Affiche bulles dans sidebar
      Ligne 25 : Affiche cartes d'artistes
      Ligne 31 : finally cache "Chargement..." dans tous les cas

   Lignes 35-49 : loadLocations()
      Stocke lieux dans Map indexÃ©e par ID d'artiste
      Ligne 44 : artistLocationsById.set(item.id, item.locations)

   Lignes 51-74 : loadDates()
      Stocke dates dans Map (gÃ¨re 3 formats diffÃ©rents d'API)
      Lignes 53-68 : Gestion formats multiples

   Lignes 76-101 : displayArtists(artists)
      Affiche cartes d'artistes avec :
         Ligne 89-90 : Couleur fond gÃ©nÃ©rÃ©e par hash du nom
         Nombre membres, date crÃ©ation, premier album
         Lien vers page dÃ©tail

   Lignes 103-182 : setupSearch() - Recherche avancÃ©e
      Ligne 115 : Fonction applyFilters() applique tous critÃ¨res
      Ligne 122 : filter() crÃ©e nouveau tableau filtrÃ©
      Ligne 123 : Filtre par nom d'artiste
      Lignes 127-131 : Filtre par lieu (si checkbox cochÃ©e)
      Ligne 129 : some() = true si AU MOINS un lieu correspond
      Lignes 133-137 : Filtre par date exacte
      Lignes 139-146 : Filtre par plage d'annÃ©es
      Ligne 141 : Extrait annÃ©es : "2015-06-20" â†’ 2015
      Lignes 154-157 : Toggle panneau recherche avancÃ©e
      Lignes 159-166 : Ã‰vÃ©nements 'input' pour filtrage temps rÃ©el
      Lignes 168-181 : Clic bulle remplit recherche et scroll

   Lignes 184-200 : renderArtistBubbles(artists)
      CrÃ©e boutons colorÃ©s dans sidebar
      Ligne 194 : dataset.artist crÃ©e attribut data-artist="nom"
      Ligne 197 : Couleur plus saturÃ©e que cartes (55% vs 92%)

4. artist-detail.html - Page dÃ©tail d'un artiste
   Ligne 23 : Conteneur <div id="artistDetail"> VIDE
   Tout HTML gÃ©nÃ©rÃ© dynamiquement par JavaScript
   Scripts : utils.js PUIS artist-detail.js

5. artist-detail.js - Logique dÃ©tail artiste (172 lignes)
   Lignes 1-13 : Initialisation et validation ID
      Ligne 2 : URLSearchParams parse ?id=5
      Ligne 6 : parseId() valide que ID est nombre > 0
      Ligne 8 : Redirige vers /artists.html si ID invalide

   Lignes 15-59 : loadArtistDetail(artistId)
      Lignes 25-29 : 3 requÃªtes API EN PARALLÃˆLE avec Promise.all()
      Ligne 39 : find() recherche artiste avec cet ID
      Lignes 48-49 : RÃ©cupÃ¨re lieux et dates spÃ©cifiques

   Lignes 77-130 : displayArtistDetail() - GÃ©nÃ¨re tout le HTML
      Ligne 82 : En-tÃªte avec gradient couleur unique (2 teintes)
      Ligne 83 : Image de l'artiste
      Lignes 94-96 : Section Histoire avec biographie auto-gÃ©nÃ©rÃ©e
      Lignes 100-103 : Section Membres (tags cliquables)
      Lignes 107-112 : Section Lieux (tous les lieux)
      Lignes 116-122 : Section Dates (12 premiÃ¨res + compteur)
      Ligne 119 : slice(0, 12) limite Ã  12 dates affichÃ©es
      Ligne 121 : Affiche "+ X autres dates" si > 12

   Lignes 132-171 : generateBiography() - GÃ©nÃ¨re bio intelligente
      GÃ©nÃ©ration automatique : Texte cohÃ©rent en franÃ§ais
      Lignes 134-135 : "artiste solo" ou "groupe de X membres"
      Ligne 143 : join(', ') crÃ©e liste membres
      Ligne 149 : Compte et format concerts
      Lignes 154-160 : Extrait pays uniques :
         map() : "paris-france" â†’ "france"
         filter(Boolean) : Supprime valeurs vides
         new Set() : Ã‰limine doublons
         [...] : Convertit Set en tableau
      Ligne 156 : slice(0, 3) prend 3 premiers pays

6. locations.html - Page des lieux
   Ligne 26 : Champ de recherche
   Ligne 29 : Grille cartes lieux
   Scripts : utils.js, city-images.js, locations.js (ordre important!)

7. locations.js - Logique page lieux (101 lignes)
   Lignes 17-40 : loadLocations()
      Ligne 24 : new Set() extrait lieux uniques
      Lignes 25-29 : Double boucle collecte tous lieux
      Ligne 30 : Array.from(locationsSet).sort() trie alphabÃ©tiquement

   Lignes 42-89 : displayLocations() - Chargement progressif
      PROGRESSIVE ENHANCEMENT : Gradient immÃ©diat â†’ Image async
      Lignes 57-63 : Gradient multi-couleurs (4 teintes avec alpha)
      Ligne 65 : Applique gradient immÃ©diatement
      Ligne 67 : Ajoute carte au DOM (AVANT image!)
      Ligne 71 : Charge image ASYNCHRONEMENT
      Lignes 74-78 : Remplace par image quand chargÃ©e :
         Overlay noir semi-transparent (10-25%)
         backgroundSize: 'cover' remplit conteneur
         backgroundPosition: 'center' centre image
      Lignes 79-82 : Garde gradient si image Ã©choue

   Lignes 91-100 : setupSearch()
      Ligne 93 : Ã‰vÃ©nement 'keyup' sur chaque touche
      Ligne 96 : Filtre et rÃ©affiche temps rÃ©el

8. dates.html - Page des dates
   Ligne 25 : Liste dates
   Lignes 26-30 : ContrÃ´les pagination (PrÃ©cÃ©dent / Page X/Y / Suivant)
   Script : dates.js seulement

9. dates.js - Logique page dates (136 lignes)
   Variables globales (lignes 1-3) :
      datesEntries = [] : Toutes entrÃ©es dates
      currentPage = 1 : Page actuelle
      itemsPerPage = 12 : Nombre items par page

   Lignes 36-54 : displayDates(datesData)
      Ligne 40 : Normalise format API
      Ligne 47 : Object.keys() rÃ©cupÃ¨re toutes clÃ©s
      Ligne 48 : map() transforme en objets {id, dates}
      Ligne 49 : filter() garde seulement valides
      Ligne 50 : sort() trie par ID numÃ©rique

   Lignes 56-77 : normalizeDatesIndex() - GÃ¨re 4 formats API
      Format 1 : {index: [{id: 1, dates: [...]}]}
      Format 2 : {index: {"1": [...], "2": [...]}}
      Format 3 : {"1": [...], "2": [...]}
      Format 4 : null/undefined â†’ objet vide

   Lignes 91-115 : renderDatesPage() - Pagination
      Ligne 99 : Math.ceil() arrondit haut : 13/12 = 1.08 â†’ 2 pages
      Ligne 100 : EmpÃªche currentPage invalide
      Ligne 102 : Calcul index dÃ©part : Page 2 = (2-1)*12 = 12
      Ligne 103 : slice() extrait 12 Ã©lÃ©ments
      Lignes 113-114 : Active/dÃ©sactive boutons selon page

   Lignes 117-135 : setupPagination()
      Lignes 121-126 : Bouton "PrÃ©cÃ©dent" dÃ©crÃ©mente page
      Lignes 128-134 : Bouton "Suivant" incrÃ©mente page

================================================================================

ğŸ¨ FonctionnalitÃ©s clÃ©s

Couleurs dynamiques uniques
   Chaque artiste/lieu a couleur unique gÃ©nÃ©rÃ©e par hash de son nom
   Algorithme : Hash du nom â†’ Teinte HSL (0-360)
   MÃªme nom = toujours mÃªme couleur
   Utilisation : Cartes artistes, bulles, en-tÃªtes, lieux

Recherche avancÃ©e multi-critÃ¨res
   Nom d'artiste : Recherche textuelle temps rÃ©el
   Lieux : Filtre par ville/pays (ex: "paris")
   Dates : Recherche par date exacte (ex: "2015-06-20")
   AnnÃ©es : Plage d'annÃ©es (De/Ã€)
   Combinable : Tous filtres peuvent Ãªtre combinÃ©s
   Temps rÃ©el : RÃ©sultats instantanÃ©s pendant frappe

Pagination intelligente
   Page dates : 12 items par page
   Calcul dynamique : Nombre total pages ajustÃ© automatiquement
   Boutons dÃ©sactivÃ©s : PrÃ©cÃ©dent (page 1) / Suivant (derniÃ¨re page)
   Navigation fluide entre pages

Biographie automatique
   GÃ©nÃ©ration : Texte cohÃ©rent en franÃ§ais basÃ© sur donnÃ©es
   Contenu : Type (solo/groupe), membres, historique, statistiques
   Adaptation : Singulier/pluriel, compteurs dynamiques
   Intelligence : Extrait pays uniques, compte concerts

Images dynamiques avec fallback
   Source principale : API Pexels (photos rÃ©elles villes)
   Cache Map : Ã‰vite requÃªtes rÃ©pÃ©tÃ©es
   Fallback : Lorem Picsum si Pexels Ã©choue
   Progressive Enhancement : Gradient â†’ Image async
   Performance : Image chargÃ©e en arriÃ¨re-plan

Interface responsive
   Design adaptatif avec CSS (630 lignes)
   Sidebar collapsible sur mobile
   Grilles flexibles (CSS Grid + Flexbox)
   Navigation tactile optimisÃ©e

Performance optimisÃ©e
   Promise.all() : RequÃªtes API parallÃ¨les (300ms au lieu de 900ms)
   Cache Map : Images villes (0ms au lieu de 500ms)
   Pagination : Limite affichage (12/page au lieu de tout)
   Chargement async : Images en arriÃ¨re-plan
   Code refactorisÃ© : Moins duplication

================================================================================

ğŸ”„ Flux de donnÃ©es

API externe (groupietrackers.herokuapp.com)
           â†“
   Serveur Go (proxy) - server.go
      â”œâ”€ proxyAPI("artists")     â†’ /api/artists
      â”œâ”€ proxyAPI("locations")   â†’ /api/locations
      â”œâ”€ proxyAPI("dates")       â†’ /api/dates
      â””â”€ handleCityImage()       â†’ /api/city-image â†’ Pexels API
           â†“
   Frontend JS (fetch)
      â”œâ”€ Promise.all([3 APIs]) en PARALLÃˆLE
      â”œâ”€ Cache Map pour images
      â””â”€ GÃ©nÃ©ration HTML dynamique
           â†“
   Affichage HTML/CSS
      â”œâ”€ Cartes artistes colorÃ©es
      â”œâ”€ Images lieux (Pexels)
      â”œâ”€ Filtres temps rÃ©el
      â””â”€ Navigation fluide

================================================================================

âš¡ AmÃ©liorations du Refactoring

AVANT :
   âŒ hashToHue() dupliquÃ©e dans 3 fichiers
   âŒ 3 fonctions serveur identiques (getArtists, getLocations, getDates)
   âŒ Pas de validation IDs
   âŒ Pas de documentation
   âŒ server.go dans mauvais dossier (static/)
   âŒ Images gÃ©nÃ©riques (Lorem Picsum seulement)

APRÃˆS :
   âœ… utils.js : 4 fonctions partagÃ©es (hashToHue, normalize, parseId, formatDateLabel)
   âœ… proxyAPI() : Une seule fonction pour 3 endpoints
   âœ… Validation ID : parseId() empÃªche IDs invalides
   âœ… README.md : Documentation complÃ¨te (130+ lignes)
   âœ… Structure : server.go Ã  racine, scripts/ pour tests
   âœ… Pexels API : Images rÃ©elles villes avec fallback
   âœ… Cache Map : Performance optimisÃ©e
   âœ… city-images.js : Gestion images sÃ©parÃ©e

================================================================================

ğŸ“Š Technologies utilisÃ©es

Backend :
   Go 1.x avec net/http
   Proxy API (Ã©vite CORS)
   defer pour fermeture ressources
   Structures anonymes pour JSON

Frontend :
   HTML5 (structure sÃ©mantique)
   CSS3 (Flexbox, Grid, 630 lignes)
   JavaScript ES6+ (async/await, arrow functions)
   Fetch API (requÃªtes HTTP)
   Promise.all() (parallÃ©lisme)
   Map (cache performant)
   Set (Ã©limination doublons)
   Array methods (map, filter, find, some, forEach)

APIs externes :
   Groupie Trackers API (artistes/lieux/dates)
   Pexels API (images villes avec auth)
   Lorem Picsum (fallback sans auth)

Patterns :
   DRY (Don't Repeat Yourself)
   Progressive Enhancement
   Lazy Loading
   Caching
   Error Handling
   Responsive Design
   Accessibility (ARIA)

================================================================================

ğŸ¯ RÃ©sumÃ©

Groupie-Tracker = Application web moderne affichant infos sur 52 artistes

CaractÃ©ristiques :
   âœ… 52 artistes avec dÃ©tails complets
   âœ… Recherche avancÃ©e multi-critÃ¨res
   âœ… Images rÃ©elles villes (Pexels)
   âœ… Biographies auto-gÃ©nÃ©rÃ©es
   âœ… Couleurs uniques par artiste
   âœ… Interface intuitive (bulles + filtres)
   âœ… Performance optimisÃ©e
   âœ… Code refactorisÃ© et structurÃ©

Architecture :
   Backend : Serveur Go avec proxy API
   Frontend : HTML5 + CSS3 + JavaScript ES6+
   APIs : Groupie Trackers + Pexels
   Fichiers : 1 Go + 5 HTML + 6 JS + 1 CSS

Concepts dÃ©montrÃ©s :
   Serveur HTTP Go, Proxy API, async/await, DOM manipulation,
   Algorithmes hash, Pagination, Cache, GÃ©nÃ©ration contenu,
   Filtrage temps rÃ©el, Progressive Enhancement
